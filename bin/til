#!/bin/sh

TIL_ROOTDIR="$(dirname $(realpath $0))/.."
TILHOME=${TILHOME:-$TIL_ROOTDIR}
SUBCOMMAND=${1:-browse}
CUR_DIR=$PWD

cd $TILHOME
case $1 in
   "import")
      echo $(readlink --canonicalize "$TIL_ROOTDIR")/bin/_$2
      ;;
   "commit")
      git commit -av
      ;;
   *)
      $TIL_ROOTDIR/bin/$SUBCOMMAND ${*:2}
      ;;
esac
cd $CUR_DIR
